<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>

<!-- 
异步操作,是js一直以来在优化的
从最早的回调函数,到Promise对象,再到async/await都是为了解决异步回调

async/await是建立在Promise的基础之上的
async总是返回一个Promise对象

await必须在async函数中使用,等待一个Promise对象的结果
async/await没有错误回调,可以用try/catch捕获错误
 -->

<script src="./axios.min.js"></script>
<script>

let url = 'http://localhost:3000/heros'

// 案例1
/*function fn(ms){
	return new Promise(resolve =>{
		setTimeout(resolve,ms)
	})
}

async function as( v, ms){
	await fn(ms)
	console.log(v)
}
as('async demo',2000)*/

// 案例2(axios请求接口)
/* const f = async ()=>{
	let response = await axios.get(url)
	console.log(response)
}
f()*/

// 案例3
/*async function demo3(){
	return await Math.random()
}
// 返回Promise对象
console.log(demo3())
// async函数可以使用then方法
demo3().then( response =>{
	console.log(response)
})*/

// 错误捕获
const demo4 = async ()=>{
	try{
		let response = await axios.get(url+123)
	  console.log(response)
	} catch(err){
		console.log('错误捕获',err)
	}
}
demo4()
</script>

</body>
</html>